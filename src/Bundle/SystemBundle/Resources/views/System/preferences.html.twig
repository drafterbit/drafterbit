{% extends "SystemBundle::base.html.twig" %}

{% block stylesheets %}
    {{ parent() }}

    {% stylesheets filter="scss"
    '@SystemBundle/Resources/scss/vertical-tabs.scss' %}
        <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}

{% endblock %}

{% block content %}
	<div class="container">
		<div class="row">
		    <div class="col-md-3">
		        <ul id="dt-preferences-tab" class="nav nav-tabs tabs-left">
		            <li role="presentation"><a href="#pref-dashboard" aria-controls="" role="tab" data-toggle="tab">Dashboard</a></li>
		        </ul>
		    </div>
		    <div class="col-md-9">
		        <div class="tab-content">
	                <div role="tabpanel" class="tab-pane" id="pref-dashboard">
	                	<button data-toggle="modal" data-target="#dt-available-panels" type="button" class="btn btn-success">Add Panel</button>

	                	<div class="row">
				            <div class="col-md-6" id="dt-panels-left" data-pos="left">
				                {% for panel in left_panels %}
				                	{{_self.panel_item(panel)}}
				                {% endfor %}
				            </div>

				            <div class="col-md-6" id="dt-panels-right" data-pos="right">
				                {% for panel in right_panels %}
				                	{{_self.panel_item(panel)}}
				                {% endfor %}
				            </div>
				        </div>

	                </div>
		        </div>
		    </div>
		</div>
	</div>

	<div class="modal in" id="dt-available-panels">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button aria-label="Close" data-dismiss="modal" class="close" type="button"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title">{{ __('Available Panels') }}</h4>
				</div>
				<div class="modal-body">
					<h5>{{ __('Select Panel') }}</h5>
					<ul class="nav">
						{% for panel in panels %}
							<li><a data-id="{{ panel.name }}" data-toggle="modal" data-target="#dt-panel-edit-modal" href="#">{{ panel.name }}</a></li>
						{% endfor %}
					</ul>
				</div>
			</div>
		</div>
	</div>

	<div class="modal in" id="dt-panel-edit-modal">
		<div class="modal-dialog">
			<div class="modal-content">
				//..
			</div>
		</div>
	</div>
{% endblock %}

{% macro panel_item(panel) %}
	<div style="border:1px solid #eee;padding:10px;margin:5px 0;">
		{{ panel.title }}

		<div class="pull-right">
			<a data-id="{{ panel.id }}" data-toggle="modal" data-target="#dt-panel-edit-modal" href="javascript:;" class="dt-panel-edit-toggler">
	            <i class="fa fa-edit"></i>
	        </a>
			<a data-id="{{ panel.id }}" href="#" class="dt-panel-delete"><i class="fa fa-times"></i></a>
		</div>
	</div>
{% endmacro %}

{% block javascripts %}
    {{ parent() }}
    {% javascripts
    '@jquery_form'
    '@bootstrap_tabcollapse'
    '@UserBundle/Resources/js/preferences.js' %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}
